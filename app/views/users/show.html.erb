<div class="mt-3">
  <div class="flex-1 lg:w-1/2">
    <%= link_to murmurs_path do %>
    <span class="flex items-center gap-2 text-sm opacity-50">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
      </svg> Back
    </span>
    <% end %>

    <div class="flex mb-4 items-end">
      <h1 class="font-semibold mt-2 mr-2"><%= @user.full_name %></h1>
      <div data-controller="follow"
           data-follow-followed-id-value="<%= @user.id %>"
           data-follow-following-value="<%= current_user.following.exists?(@user.id) %>">

        <% if UserPolicy.new(current_user, @user).follow? %>
          <button
            data-action="click->follow#toggle"
            data-follow-target="button"
            class="btn btn-xs <%= current_user.following.exists?(@user.id) ? "btn-error" : "btn-outline" %>"
          >
            <%= current_user.following.exists?(@user.id) ? "Unfollow" : "Follow" %>
          </button> |
        <% end %>

        <span class="text-xs opacity-60">follower count: </span>
        <span data-follow-target="count" class="text-xs opacity-70">
          <%= @user.followers.count %>
        </span>
      </div>
    </div>

    <div class="flex justify-between mb-3">
      <p class="text-xs font-semibold opacity-60 mb-2">Murmurs</p>
      <%= link_to "New Murmur", new_murmur_path, data: { turbo_frame: 'modal' }, class: "btn btn-neutral" if current_user == @user %>
    </div>
    <div id="murmurs">
      <%= render partial: "murmurs/murmur", collection: @murmurs, as: :murmur %>
    </div>

    <div class="flex justify-center">
      <%= will_paginate @murmurs %>
    </div>
  </div>
</div>
